<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ page import="static com.aplana.timesheet.form.EmploymentPlanningForm.*" %>
<%@ page import="static com.aplana.timesheet.util.ResourceUtils.getResRealPath" %>
<%@ page import="static com.aplana.timesheet.constants.TimeSheetConstants.DOJO_PATH" %>

<html>
<head>

    <title>

    </title>

    <%--<script src="<%= getResRealPath("/resources/js/DataGrid.ext.js", application) %>" type="text/javascript"></script>--%>

    <style type="text/css">
        @import "<%= DOJO_PATH %>/dojox/grid/resources/Grid.css";
        @import "<%= DOJO_PATH %>/dojox/grid/resources/tundraGrid.css";
        .dojoxGrid table { margin: 0; } html, body { width: 100%; height: 100%; margin: 0; }
    </style>

    <script type="text/javascript">

        dojo.require("dojox.grid.DataGrid");
        dojo.require("dojo.data.ItemFileWriteStore");

        var grid;

        dojo.addOnLoad(function () {
            grid = dojo.byId("gridDiv");

            /* обработка нажатия на строку (не работает) */
            dojo.connect(grid, "onRowClick", grid, function(evt){
                var idx = evt.rowIndex,
                        item = this.getItem(idx);

                alert(item);
            });
        });

        /* тестовые табличные данные */
        <%--var dataJson = '${jsonDataToShow}';--%>
        var dataJson = '[{"employee_id":2,"employee":"Аванесов Григорий","percent_of_charge_plan":"111%","1080_plan":130,"summary_plan":"186/168","1211_plan":20,"center_projects_plan":168,"other_projects_and_presales_plan":8,"75_plan":8,"20_plan":18,"vacation_plan":0,"summary_commercial_plan":176,"non_project_plan":10,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":1,"center_projects_fact":35,"1211_fact":1,"percent_of_charge_fact":"21%","center_presales_fact":0,"1080_fact":34,"summary_commercial_fact":35,"illness_fact":0,"non_project_fact":1,"summary_fact":36},{"employee_id":41,"employee":"Баянов Артур","percent_of_charge_plan":"95%","summary_plan":"80/168","center_projects_plan":80,"other_projects_and_presales_plan":0,"23_plan":80,"vacation_plan":80,"summary_commercial_plan":80,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":80,"summary_investment_fact":0,"center_projects_fact":0,"percent_of_charge_fact":"48%","center_presales_fact":0,"illness_fact":0,"non_project_fact":0,"summary_fact":80},{"employee_id":243,"employee":"Валеев Денис","percent_of_charge_plan":"95%","summary_plan":"160/168","center_projects_plan":160,"other_projects_and_presales_plan":0,"1150_plan":80,"vacation_plan":0,"summary_commercial_plan":160,"illness_plan":0,"11_plan":80,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":24,"percent_of_charge_fact":"14%","1150_fact":16,"center_presales_fact":0,"summary_commercial_fact":24,"11_fact":9,"illness_fact":0,"non_project_fact":0,"summary_fact":24},{"employee_id":431,"employee":"Вантеев Александр","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":16,"percent_of_charge_fact":"10%","center_presales_fact":0,"1080_fact":16,"summary_commercial_fact":16,"illness_fact":0,"non_project_fact":0,"summary_fact":16},{"employee_id":721,"employee":"Васильев Евгений","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":8,"23_fact":10,"vacation_fact":0,"70_fact":8,"center_projects_fact":16,"percent_of_charge_fact":"24%","summary_commercial_fact":16,"illness_fact":0,"summary_investment_fact":24,"17_fact":2,"center_presales_fact":0,"1080_fact":1,"20_fact":4,"non_project_fact":16,"summary_fact":40},{"employee_id":463,"employee":"Войкин Вадим","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"center_projects_fact":32,"percent_of_charge_fact":"19%","summary_commercial_fact":32,"11_fact":6,"48_fact":19,"illness_fact":0,"summary_investment_fact":0,"center_presales_fact":0,"non_project_fact":0,"summary_fact":32,"79_fact":7},{"employee_id":511,"employee":"Волегов Иван","percent_of_charge_plan":"199%","summary_plan":"254/168","center_projects_plan":166,"other_projects_and_presales_plan":88,"75_plan":88,"20_plan":166,"vacation_plan":80,"summary_commercial_plan":254,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":80,"summary_investment_fact":0,"center_projects_fact":0,"percent_of_charge_fact":"48%","center_presales_fact":0,"illness_fact":0,"non_project_fact":0,"summary_fact":80},{"employee_id":6,"employee":"Галкин Олег","1_plan":24,"percent_of_charge_plan":"92%","summary_plan":"154/168","1211_plan":90,"center_projects_plan":114,"other_projects_and_presales_plan":40,"summary_investment_plan":40,"vacation_plan":0,"summary_commercial_plan":114,"70_plan":40,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":37,"1211_fact":37,"percent_of_charge_fact":"22%","center_presales_fact":0,"summary_commercial_fact":37,"illness_fact":0,"non_project_fact":0,"summary_fact":37},{"employee_id":11,"employee":"Горячкин Семён","percent_of_charge_plan":"100%","1080_plan":136,"summary_plan":"136/168","center_projects_plan":136,"other_projects_and_presales_plan":0,"vacation_plan":32,"summary_commercial_plan":136,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":32,"summary_investment_fact":0,"center_projects_fact":16,"percent_of_charge_fact":"29%","center_presales_fact":0,"1080_fact":16,"summary_commercial_fact":16,"illness_fact":0,"non_project_fact":0,"summary_fact":48},{"employee_id":16,"employee":"Деев Игорь","percent_of_charge_plan":"83%","summary_plan":"140/168","1211_plan":60,"center_projects_plan":60,"other_projects_and_presales_plan":80,"75_plan":40,"summary_investment_plan":40,"vacation_plan":0,"summary_commercial_plan":100,"70_plan":40,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":0,"percent_of_charge_fact":"0%","center_presales_fact":0,"illness_fact":0,"non_project_fact":0,"summary_fact":0},{"employee_id":666,"employee":"Жеребцова Ольга","percent_of_charge_plan":"100%","summary_plan":"168/168","other_projects_and_presales_plan":168,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"1135_plan":168,"other_projects_and_presales_fact":34,"vacation_fact":0,"70_fact":34,"summary_investment_fact":36,"center_projects_fact":9,"percent_of_charge_fact":"26%","center_presales_fact":0,"summary_commercial_fact":9,"illness_fact":0,"non_project_fact":2,"48_fact":9,"summary_fact":45},{"employee_id":13,"employee":"Задорожный Илья","percent_of_charge_plan":"100%","summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"23_plan":168,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"23_fact":40,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"summary_fact":40},{"employee_id":1,"employee":"Зайцев Дмитрий","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":14,"23_fact":3,"vacation_fact":0,"70_fact":7,"center_projects_fact":6,"percent_of_charge_fact":"14%","summary_commercial_fact":14,"80_fact":7,"11_fact":0,"illness_fact":0,"1090_fact":1,"summary_investment_fact":10,"1211_fact":1,"center_presales_fact":0,"1080_fact":0,"9_fact":1,"non_project_fact":3,"summary_fact":23,"79_fact":1},{"employee_id":44,"employee":"Земцова Анастасия","percent_of_charge_plan":"100%","summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"20_plan":40,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"11_plan":128,"other_projects_and_presales_fact":0,"1_fact":2,"vacation_fact":0,"center_projects_fact":32,"percent_of_charge_fact":"19%","summary_commercial_fact":32,"11_fact":20,"illness_fact":0,"summary_investment_fact":0,"center_presales_fact":0,"20_fact":11,"non_project_fact":0,"summary_fact":32},{"employee_id":55,"employee":"Зиянгиров Ильдар","percent_of_charge_plan":"95%","summary_plan":"160/168","center_projects_plan":160,"other_projects_and_presales_plan":0,"23_plan":80,"vacation_plan":0,"summary_commercial_plan":160,"illness_plan":0,"1163_plan":80,"other_projects_and_presales_fact":0,"23_fact":3,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":24,"percent_of_charge_fact":"14%","center_presales_fact":0,"summary_commercial_fact":24,"illness_fact":0,"non_project_fact":0,"summary_fact":24,"1163_fact":21},{"employee_id":572,"employee":"Иванов Александр","percent_of_charge_plan":"100%","1080_plan":88,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"23_plan":80,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"1080_fact":40,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"summary_fact":40},{"employee_id":595,"employee":"Исламуратова Карина","percent_of_charge_plan":"88%","summary_plan":"148/168","center_projects_plan":148,"other_projects_and_presales_plan":0,"23_plan":88,"9_plan":40,"vacation_plan":0,"summary_commercial_plan":148,"illness_plan":0,"1090_plan":20,"other_projects_and_presales_fact":0,"23_fact":29,"vacation_fact":0,"center_projects_fact":41,"percent_of_charge_fact":"24%","1150_fact":1,"summary_commercial_fact":41,"illness_fact":0,"1090_fact":4,"summary_investment_fact":0,"center_presales_fact":0,"9_fact":8,"non_project_fact":0,"summary_fact":41},{"employee_id":18,"employee":"Кабанова Елена","1_plan":20,"percent_of_charge_plan":"85%","summary_plan":"142/168","center_projects_plan":142,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":142,"illness_plan":0,"1163_plan":42,"48_plan":80,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":4,"center_projects_fact":26,"percent_of_charge_fact":"18%","center_presales_fact":0,"summary_commercial_fact":26,"illness_fact":0,"non_project_fact":4,"48_fact":2,"summary_fact":30,"1163_fact":24},{"employee_id":201,"employee":"Кадыргулов Айдар","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":8,"summary_investment_fact":0,"center_projects_fact":39,"percent_of_charge_fact":"28%","center_presales_fact":0,"1080_fact":39,"summary_commercial_fact":39,"illness_fact":0,"non_project_fact":0,"summary_fact":47},{"employee_id":203,"employee":"Кинзябулатов Булат","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":34,"percent_of_charge_fact":"20%","center_presales_fact":0,"1080_fact":34,"summary_commercial_fact":34,"illness_fact":0,"non_project_fact":0,"summary_fact":34},{"employee_id":21,"employee":"Климин Михаил","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":8,"23_fact":6,"vacation_fact":0,"70_fact":6,"center_projects_fact":24,"percent_of_charge_fact":"24%","1135_fact":1,"summary_commercial_fact":26,"illness_fact":0,"1163_fact":1,"summary_investment_fact":15,"1171_fact":1,"center_presales_fact":0,"1080_fact":11,"20_fact":3,"9_fact":4,"non_project_fact":9,"summary_fact":41},{"employee_id":209,"employee":"Клявлин Айдар","percent_of_charge_plan":"100%","summary_plan":"168/168","other_projects_and_presales_plan":168,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"1135_plan":168,"other_projects_and_presales_fact":33,"vacation_fact":0,"70_fact":33,"summary_investment_fact":36,"center_projects_fact":0,"percent_of_charge_fact":"21%","center_presales_fact":0,"illness_fact":0,"non_project_fact":3,"summary_fact":36},{"employee_id":673,"employee":"Коновалов Владимир","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":1,"vacation_fact":0,"70_fact":1,"center_projects_fact":33,"percent_of_charge_fact":"20%","summary_commercial_fact":33,"illness_fact":0,"1211_fact":4,"summary_investment_fact":1,"center_presales_fact":0,"20_fact":7,"non_project_fact":0,"summary_fact":34,"79_fact":22},{"employee_id":640,"employee":"Королев Николай","percent_of_charge_plan":"75%","summary_plan":"126/168","center_projects_plan":126,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":126,"illness_plan":0,"11_plan":126,"other_projects_and_presales_fact":2,"vacation_fact":0,"70_fact":2,"summary_investment_fact":2,"center_projects_fact":41,"percent_of_charge_fact":"25%","center_presales_fact":0,"summary_commercial_fact":41,"11_fact":41,"illness_fact":0,"non_project_fact":0,"summary_fact":42},{"employee_id":460,"employee":"Котов Сергей","percent_of_charge_plan":"107%","summary_plan":"180/168","1211_plan":80,"center_projects_plan":180,"other_projects_and_presales_plan":0,"23_plan":80,"vacation_plan":0,"summary_commercial_plan":180,"illness_plan":0,"11_plan":20,"other_projects_and_presales_fact":14,"23_fact":10,"vacation_fact":0,"70_fact":14,"center_projects_fact":18,"percent_of_charge_fact":"19%","summary_commercial_fact":18,"11_fact":4,"illness_fact":0,"1211_fact":5,"summary_investment_fact":14,"center_presales_fact":0,"non_project_fact":0,"summary_fact":32},{"employee_id":660,"employee":"Кувшинов Евгений","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":23,"percent_of_charge_fact":"14%","center_presales_fact":0,"1080_fact":23,"summary_commercial_fact":23,"illness_fact":0,"non_project_fact":0,"summary_fact":23},{"employee_id":5,"employee":"Кузьмина Олеся","percent_of_charge_plan":"100%","1080_plan":88,"summary_plan":"88/168","center_projects_plan":88,"other_projects_and_presales_plan":0,"vacation_plan":80,"summary_commercial_plan":88,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":80,"summary_investment_fact":0,"center_projects_fact":42,"percent_of_charge_fact":"72%","center_presales_fact":0,"1080_fact":42,"summary_commercial_fact":42,"illness_fact":0,"non_project_fact":0,"summary_fact":122},{"employee_id":690,"employee":"Лебедев Николай","percent_of_charge_plan":"100%","summary_plan":"120/168","center_projects_plan":80,"other_projects_and_presales_plan":40,"23_plan":80,"75_plan":40,"vacation_plan":48,"summary_commercial_plan":120,"illness_plan":16,"other_projects_and_presales_fact":3,"23_fact":61,"vacation_fact":48,"summary_investment_fact":0,"center_projects_fact":61,"percent_of_charge_fact":"67%","center_presales_fact":0,"summary_commercial_fact":65,"illness_fact":16,"non_project_fact":0,"75_fact":3,"summary_fact":113},{"employee_id":242,"employee":"Левыкин Дмитрий","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":50,"percent_of_charge_fact":"30%","center_presales_fact":0,"1080_fact":50,"summary_commercial_fact":50,"illness_fact":0,"non_project_fact":0,"summary_fact":50},{"employee_id":100,"employee":"Ломоносов Евгений","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":39,"percent_of_charge_fact":"23%","center_presales_fact":0,"1080_fact":39,"summary_commercial_fact":39,"illness_fact":0,"non_project_fact":0,"summary_fact":39},{"employee_id":40,"employee":"Лошкарев Денис","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":0,"percent_of_charge_fact":"0%","center_presales_fact":0,"illness_fact":0,"non_project_fact":0,"summary_fact":0},{"employee_id":620,"employee":"Лядов Владимир","percent_of_charge_plan":"76%","summary_plan":"128/168","center_projects_plan":128,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":128,"illness_plan":0,"1163_plan":128,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":39,"percent_of_charge_fact":"23%","center_presales_fact":0,"summary_commercial_fact":39,"illness_fact":0,"non_project_fact":0,"summary_fact":39,"1163_fact":39},{"employee_id":612,"employee":"Макаров Павел","percent_of_charge_plan":"89%","summary_plan":"150/168","center_projects_plan":150,"other_projects_and_presales_plan":0,"1150_plan":40,"vacation_plan":0,"summary_commercial_plan":150,"illness_plan":0,"11_plan":110,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"summary_commercial_fact":40,"11_fact":4,"9_fact":36,"illness_fact":0,"non_project_fact":0,"summary_fact":40},{"employee_id":512,"employee":"Макогон Юрий","percent_of_charge_plan":"100%","summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"23_plan":90,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"11_plan":78,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"1080_fact":4,"summary_commercial_fact":40,"11_fact":36,"illness_fact":0,"non_project_fact":0,"summary_fact":40},{"employee_id":473,"employee":"Маламут Александр","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"1080_fact":40,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"summary_fact":40},{"employee_id":70,"employee":"Матисов Олег","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"1080_fact":40,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"summary_fact":40},{"employee_id":4,"employee":"Михеева Анна","percent_of_charge_plan":"89%","summary_plan":"150/168","center_projects_plan":60,"other_projects_and_presales_plan":30,"1150_plan":30,"50_plan":30,"vacation_plan":0,"summary_commercial_plan":90,"non_project_plan":60,"illness_plan":0,"48_plan":30,"other_projects_and_presales_fact":11,"vacation_fact":0,"70_fact":2,"center_projects_fact":16,"percent_of_charge_fact":"19%","1150_fact":3,"summary_commercial_fact":25,"illness_fact":0,"48_fact":11,"50_fact":9,"summary_investment_fact":7,"center_presales_fact":0,"non_project_fact":5,"summary_fact":32,"79_fact":2},{"employee_id":26,"employee":"Мурадимов Артур","percent_of_charge_plan":"89%","summary_plan":"150/168","center_projects_plan":150,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":150,"illness_plan":0,"1163_plan":150,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"summary_fact":40,"1163_fact":40},{"employee_id":480,"employee":"Мустафина Сария","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":32,"percent_of_charge_fact":"19%","center_presales_fact":0,"1080_fact":32,"summary_commercial_fact":32,"illness_fact":0,"non_project_fact":0,"summary_fact":32},{"employee_id":3,"employee":"Никольский Игорь","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":14,"1_fact":1,"vacation_fact":0,"center_projects_fact":4,"percent_of_charge_fact":"10%","summary_commercial_fact":17,"illness_fact":0,"1163_fact":3,"summary_investment_fact":1,"1171_fact":13,"76_fact":1,"center_presales_fact":0,"non_project_fact":1,"summary_fact":18},{"employee_id":8,"employee":"Носова Татьяна","percent_of_charge_plan":"100%","summary_plan":"80/168","center_projects_plan":80,"other_projects_and_presales_plan":0,"vacation_plan":88,"summary_commercial_plan":80,"illness_plan":0,"1163_plan":80,"other_projects_and_presales_fact":0,"vacation_fact":88,"summary_investment_fact":0,"center_projects_fact":0,"percent_of_charge_fact":"52%","center_presales_fact":0,"illness_fact":0,"non_project_fact":0,"summary_fact":88},{"employee_id":573,"employee":"Пестова Маргарита","percent_of_charge_plan":"100%","summary_plan":"168/168","center_projects_plan":50,"other_projects_and_presales_plan":118,"1171_plan":118,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"48_plan":50,"other_projects_and_presales_fact":20,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":20,"percent_of_charge_fact":"24%","1171_fact":20,"center_presales_fact":0,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"48_fact":20,"summary_fact":40},{"employee_id":192,"employee":"Петров Вячеслав","percent_of_charge_plan":"77%","1080_plan":80,"summary_plan":"130/168","center_projects_plan":130,"other_projects_and_presales_plan":0,"23_plan":50,"vacation_plan":0,"summary_commercial_plan":130,"illness_plan":0,"other_projects_and_presales_fact":0,"23_fact":9,"vacation_fact":0,"center_projects_fact":32,"percent_of_charge_fact":"19%","1150_fact":1,"summary_commercial_fact":32,"illness_fact":0,"summary_investment_fact":0,"center_presales_fact":0,"1080_fact":23,"non_project_fact":0,"summary_fact":32},{"employee_id":411,"employee":"Репп Денис","percent_of_charge_plan":"100%","summary_plan":"168/168","1211_plan":88,"center_projects_plan":168,"other_projects_and_presales_plan":0,"1150_plan":80,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":41,"1211_fact":16,"percent_of_charge_fact":"24%","1150_fact":25,"center_presales_fact":0,"summary_commercial_fact":41,"illness_fact":0,"non_project_fact":0,"summary_fact":41},{"employee_id":171,"employee":"Румянцев Александр","percent_of_charge_plan":"100%","summary_plan":"168/168","center_projects_plan":88,"other_projects_and_presales_plan":80,"1171_plan":80,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"1163_plan":46,"48_plan":42,"other_projects_and_presales_fact":21,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":18,"percent_of_charge_fact":"23%","1171_fact":21,"center_presales_fact":0,"summary_commercial_fact":38,"illness_fact":0,"non_project_fact":0,"48_fact":18,"summary_fact":38},{"employee_id":574,"employee":"Самоловских Виталий","percent_of_charge_plan":"83%","summary_plan":"140/168","center_projects_plan":40,"other_projects_and_presales_plan":100,"75_plan":40,"1150_plan":40,"summary_investment_plan":60,"vacation_plan":0,"summary_commercial_plan":80,"70_plan":60,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"center_projects_fact":32,"percent_of_charge_fact":"19%","1150_fact":13,"summary_commercial_fact":32,"illness_fact":0,"1090_fact":1,"summary_investment_fact":0,"center_presales_fact":0,"20_fact":12,"non_project_fact":0,"summary_fact":32,"79_fact":7},{"employee_id":471,"employee":"Сергеев Вадим","percent_of_charge_plan":"100%","summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"23_plan":168,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"23_fact":40,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"24%","center_presales_fact":0,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"summary_fact":40},{"employee_id":561,"employee":"Смирнова Надежда","percent_of_charge_plan":"100%","summary_plan":"169/168","1211_plan":110,"center_projects_plan":169,"other_projects_and_presales_plan":0,"1150_plan":59,"vacation_plan":0,"summary_commercial_plan":169,"illness_plan":0,"other_projects_and_presales_fact":13,"vacation_fact":0,"70_fact":13,"center_projects_fact":22,"percent_of_charge_fact":"20%","1150_fact":1,"summary_commercial_fact":22,"illness_fact":0,"1211_fact":9,"summary_investment_fact":13,"17_fact":3,"center_presales_fact":0,"non_project_fact":0,"summary_fact":34,"79_fact":9},{"employee_id":502,"employee":"Стеценко Евгений","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":2,"percent_of_charge_fact":"1%","center_presales_fact":0,"1080_fact":2,"summary_commercial_fact":2,"illness_fact":0,"non_project_fact":0,"summary_fact":2},{"employee_id":53,"employee":"Тимербаев Рамиль","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":8,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":8,"summary_investment_fact":0,"center_projects_fact":57,"percent_of_charge_fact":"39%","center_presales_fact":0,"1080_fact":57,"summary_commercial_fact":57,"illness_fact":0,"non_project_fact":0,"summary_fact":65},{"employee_id":642,"employee":"Ульданов Айдар","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":51,"percent_of_charge_fact":"30%","center_presales_fact":0,"1080_fact":51,"summary_commercial_fact":51,"illness_fact":0,"non_project_fact":0,"summary_fact":51},{"employee_id":15,"employee":"Файзуллин Марат","percent_of_charge_plan":"100%","1080_plan":168,"summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"vacation_plan":8,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":8,"summary_investment_fact":0,"center_projects_fact":40,"percent_of_charge_fact":"28%","center_presales_fact":0,"1080_fact":40,"summary_commercial_fact":40,"illness_fact":0,"non_project_fact":0,"summary_fact":48},{"employee_id":43,"employee":"Хазиев Ленар","percent_of_charge_plan":"95%","1080_plan":100,"summary_plan":"160/168","center_projects_plan":160,"other_projects_and_presales_plan":0,"vacation_plan":0,"summary_commercial_plan":160,"illness_plan":0,"1163_plan":60,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":29,"percent_of_charge_fact":"17%","center_presales_fact":0,"1080_fact":26,"summary_commercial_fact":29,"illness_fact":0,"non_project_fact":0,"summary_fact":29,"1163_fact":4},{"employee_id":474,"employee":"Чернова Яна","percent_of_charge_plan":"0%","summary_plan":"0/168","other_projects_and_presales_plan":0,"vacation_plan":0,"illness_plan":0,"other_projects_and_presales_fact":5,"vacation_fact":0,"70_fact":5,"summary_investment_fact":5,"center_projects_fact":36,"percent_of_charge_fact":"24%","center_presales_fact":0,"summary_commercial_fact":36,"11_fact":36,"illness_fact":0,"non_project_fact":0,"summary_fact":41},{"employee_id":597,"employee":"Черных Андрей","percent_of_charge_plan":"95%","summary_plan":"160/168","center_projects_plan":160,"other_projects_and_presales_plan":0,"1150_plan":10,"vacation_plan":0,"summary_commercial_plan":160,"illness_plan":0,"11_plan":150,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":32,"percent_of_charge_fact":"19%","center_presales_fact":0,"summary_commercial_fact":32,"11_fact":32,"illness_fact":0,"non_project_fact":0,"summary_fact":32},{"employee_id":568,"employee":"Ярославцев Евгений","percent_of_charge_plan":"100%","summary_plan":"168/168","center_projects_plan":168,"other_projects_and_presales_plan":0,"1150_plan":10,"20_plan":158,"vacation_plan":0,"summary_commercial_plan":168,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":0,"summary_investment_fact":0,"center_projects_fact":33,"percent_of_charge_fact":"20%","center_presales_fact":0,"summary_commercial_fact":33,"20_fact":33,"illness_fact":0,"non_project_fact":0,"summary_fact":33},{"employee_id":205,"employee":"Ясинский Станислав","percent_of_charge_plan":"99%","1080_plan":150,"summary_plan":"150/168","center_projects_plan":150,"other_projects_and_presales_plan":0,"vacation_plan":16,"summary_commercial_plan":150,"illness_plan":0,"other_projects_and_presales_fact":0,"vacation_fact":16,"summary_investment_fact":0,"center_projects_fact":24,"percent_of_charge_fact":"24%","center_presales_fact":0,"1080_fact":24,"summary_commercial_fact":24,"illness_fact":0,"non_project_fact":0,"summary_fact":40}]';

        // -- описание DataGrid
        var data = {
            identifier: "employee_id",
            items: []
        };

        var data_list = dojo.fromJson(dataJson);

        dojo.forEach(data_list, function (row) {
            for (var field in row) {
                if (typeof row[field] == typeof undefined) {
                    row[field] = "";
                }
            }
            data.items.push(row);
        });

        var store = new dojo.data.ItemFileWriteStore({data: data});

        var layout = [
            {'name': 'Column 1', 'field': 'employee_id', 'width': '100px'},
            {'name': 'employee', 'field': 'employee', 'width': '200px'},
            {'name': 'summary_fact', 'field': 'summary_fact', 'width': '150px'},
            {'name': 'center_projects_fact', 'field': 'center_projects_fact', 'width': '150px'}
        ];
        //-------

        /* тестовая функция добавления записи в таблицу */
        function addRow() {
            var myNewItem = {
                employee_id: Math.floor(Math.random()*110),
                employee: "Тестик тестик"
            };
            store.newItem(myNewItem);
        }

    </script>
</head>

<body>
<form:form method="post" commandName="<%= FORM %>">
    <table>
        <tr>
            <td>
                <span class="label">Месяц, год начала периода:</span>
            </td>
            <td>
                <form:select path="monthBeg" class="without_dojo" >
                    <form:options items="${monthList}" itemLabel="monthTxt" itemValue="month"/>
                </form:select>
            </td>
            <td>
                <form:select path="yearBeg" class="without_dojo" >
                    <form:options items="${yearList}" itemLabel="year" itemValue="year"/>
                </form:select>
            </td>
        </tr>
        <tr>
            <td>
                <span class="label">Месяц, год конца периода:</span>
            </td>
            <td>
                <form:select path="monthEnd" class="without_dojo" >
                    <form:options items="${monthList}" itemLabel="monthTxt" itemValue="month"/>
                </form:select>
            </td>
            <td>
                <form:select path="yearEnd" class="without_dojo" >
                    <form:options items="${yearList}" itemLabel="year" itemValue="year"/>
                </form:select>
            </td>
        </tr>
        <tr>
            <td>
                <span class="label">Выбор проекта:</span>
            </td>
            <td colspan="2">
                <form:select path="projectId">
                    <form:options items="${projectList}" itemLabel="name" itemValue="id"/>
                </form:select>
            </td>
        </tr>
    </table>
    <input style="width:150px;margin-left: 23px;" type="submit" value="Показать планы"/>
    <button style="width:150px;margin-left: 23px;" onclick="addRow();" type="button">Добавить сотрудника</button>
</form:form>
    <div id="gridDiv" jsId="grid" dojoType="dojox.grid.DataGrid" store="store"
        selectionMode="single" style="height: 200px;"
        structure="layout">
    </div>
</body>
</html>